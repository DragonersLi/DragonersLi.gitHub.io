<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="https://dragonersli.github.io/atom.xml" rel="self"/>
  
  <link href="https://dragonersli.github.io/"/>
  <updated>2024-05-12T18:11:57.990Z</updated>
  <id>https://dragonersli.github.io/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mac备忘录转成PDF再下载PDF里的图片笔记！</title>
    <link href="https://dragonersli.github.io/2023/10/22/mac%E5%A4%87%E5%BF%98%E5%BD%95%E8%BD%AC%E6%88%90PDF%E5%86%8D%E4%B8%8B%E8%BD%BD%E9%87%8C%E9%9D%A2%E5%9B%BE%E7%89%87%E7%AC%94%E8%AE%B0/"/>
    <id>https://dragonersli.github.io/2023/10/22/mac%E5%A4%87%E5%BF%98%E5%BD%95%E8%BD%AC%E6%88%90PDF%E5%86%8D%E4%B8%8B%E8%BD%BD%E9%87%8C%E9%9D%A2%E5%9B%BE%E7%89%87%E7%AC%94%E8%AE%B0/</id>
    <published>2023-10-22T08:30:16.000Z</published>
    <updated>2024-05-12T18:11:57.990Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>先将备忘录扫描文稿转成PDF文件：</p><p>iphone备忘录扫描文稿存储后的图片，在mac中打开备忘录。选择文件导出为PDF…</p></blockquote><blockquote><p>PDF转图片，很多在线工具可以实现，但为了隐私安全。使用mac自带的”自动操作”</p></blockquote><p><img src="/../assets/imgs/image-20231022172211556.png" alt="image-20231022172211556"></p><blockquote><p>文件和文件夹选项，双击获得指定的访达项目。添加或拖拽PDF进来，可多个。</p></blockquote><p><img src="/../assets/imgs/image-20231022172333544.png" alt="image-20231022172333544"></p><blockquote><p>选择左侧PDF选项，中间双击将PDF页面渲染为图像。右侧选择格式。</p></blockquote><p><img src="/../assets/imgs/image-20231022172634615.png" alt="image-20231022172634615"></p><blockquote><p>左侧选择文件和文件夹，中间双击复制访达项目</p></blockquote><p><img src="/../assets/imgs/image-20231022173044615.png" alt="image-20231022173044615"></p><blockquote><p>左侧选择文件和文件夹，中间双击给访达项目重命名，弹框点击右侧添加</p></blockquote><p><img src="/../assets/imgs/image-20231022173217512.png" alt="image-20231022173217512"></p><blockquote><p>左侧选文件与文件夹，中间给访达项目重新命名，右侧拷贝访达项目选择自己想要的PDF转成图片存放的目录，修改图片命名格式。</p></blockquote><p><img src="/../assets/imgs/image-20231022174401825.png" alt="image-20231022174401825"></p><blockquote><p>选择PDF文件，点击右上角运行。就把选择的PDF转成图片存储在自己选择的目录中了。</p></blockquote><p><img src="/../assets/imgs/image-20231022175038833.png" alt="image-20231022175038833"></p><blockquote><p>运行完成的日志输出，左上角修改workflow名称，关闭是也会提示存储。下次直接双击运行该workflow文件即可！</p></blockquote><p><img src="/../assets/imgs/image-20231022175752876.png" alt="image-20231022175752876"></p><blockquote><p>如果直接保存workflow，存储路径如下：</p></blockquote><p><img src="/../assets/imgs/image-20231022181402983.png" alt="image-20231022181402983"></p><hr>]]></content>
    
    
    <summary type="html">mac备忘录转成PDF再下载PDF里的图片笔记！</summary>
    
    
    
    <category term="Lucas" scheme="https://dragonersli.github.io/categories/Lucas/"/>
    
    
    <category term="PHP" scheme="https://dragonersli.github.io/tags/PHP/"/>
    
    <category term="Lucas" scheme="https://dragonersli.github.io/tags/Lucas/"/>
    
  </entry>
  
  <entry>
    <title>windows修改搜狗输入法默认logo笔记！</title>
    <link href="https://dragonersli.github.io/2022/03/31/windows%E4%BF%AE%E6%94%B9%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E9%BB%98%E8%AE%A4logo%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2022/03/31/windows%E4%BF%AE%E6%94%B9%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E9%BB%98%E8%AE%A4logo%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2022-03-30T16:42:00.000Z</published>
    <updated>2024-05-12T18:11:46.991Z</updated>
    
    <content type="html"><![CDATA[<p><code>win+R</code>打开运行，输入<code>regedit</code>,先定位到<code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\CTF\TIP\</code>该路径，然后搜索<code>sougou</code>找到<code>IconFile</code>名称修改数据。把<code>.ime</code>后缀的文件改成你准备好的<code>.ico</code>文件。把路径替换。然后重启<code>explorer.exe</code><br>例：<code>计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\CTF\TIP\&#123;E7EA138E-69F8-11D7-A6EA-00065B844310&#125;\LanguageProfile\0x00000804\&#123;E7EA138F-69F8-11D7-A6EA-00065B844311&#125;</code></p><p><img src="/../assets/imgs/1240-16487910828708.png" alt="注册表修改icon路径"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\DragonersLi&gt; taskkill &#x2F;f &#x2F;im explorer.exe #关闭资源管理器</span><br><span class="line">成功: 已终止进程 &quot;explorer.exe&quot;，其 PID 为 8368。</span><br><span class="line">成功: 已终止进程 &quot;explorer.exe&quot;，其 PID 为 19976。</span><br><span class="line">成功: 已终止进程 &quot;explorer.exe&quot;，其 PID 为 2536。</span><br><span class="line">PS C:\Users\DragonersLi&gt; start explorer.exe #开启资源管理器 </span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/1240-164879108870610.png" alt="搜狗输入法logo换成了太阳logo"></p><hr>]]></content>
    
    
    <summary type="html">windows修改搜狗输入法默认logo笔记！</summary>
    
    
    
    <category term="windows" scheme="https://dragonersli.github.io/categories/windows/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
    <category term="sougou" scheme="https://dragonersli.github.io/tags/sougou/"/>
    
  </entry>
  
  <entry>
    <title>记一次layui上传图片报错HTTP错误（错误代码：500）排查笔记！</title>
    <link href="https://dragonersli.github.io/2022/01/18/%E8%AE%B0%E4%B8%80%E6%AC%A1layui%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%8A%A5%E9%94%99HTTP%E9%94%99%E8%AF%AF%EF%BC%88%E9%94%99%E8%AF%AF%E4%BB%A3%E7%A0%81%EF%BC%9A500%EF%BC%89%E6%8E%92%E6%9F%A5%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2022/01/18/%E8%AE%B0%E4%B8%80%E6%AC%A1layui%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%8A%A5%E9%94%99HTTP%E9%94%99%E8%AF%AF%EF%BC%88%E9%94%99%E8%AF%AF%E4%BB%A3%E7%A0%81%EF%BC%9A500%EF%BC%89%E6%8E%92%E6%9F%A5%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2022-01-18T05:30:16.000Z</published>
    <updated>2024-05-12T16:47:12.608Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>layui插件上传图片，部分图片如果编辑过会上传报错<code>HTTP错误（错误代码：500）</code>请求上传接口出现异常！很奇怪的现象，正常图片可以上传，编辑过图片上传有出现服务器500错误。排除了代码问题。</p><p>一开始怀疑waf防火墙拦截，关闭所有规则，还是老样子。查看报错日志，发现是权限问题，之前网站nginx使用root，nobody用户开启，最后使用root。阿里云后台安全检测基线提示有风险。又改成www用户。但是网站很多目录文件，用户是root，用户组也是root。然后把项目和nginx目录和文件权限修改如下重试上传发现ok了！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#项目目录：&#x2F;www&#x2F;wwwroot&#x2F;xxx.com</span><br><span class="line">#nginx目录：&#x2F;www&#x2F;server&#x2F;nginx</span><br><span class="line"></span><br><span class="line">find .&#x2F; -type f -print |xargs chmod 644;</span><br><span class="line">find .&#x2F; -type d -print |xargs chmod 755;</span><br></pre></td></tr></table></figure></blockquote><p><img src="/../assets/imgs/image-20220118212048642.png" alt="image-20220118212048642"></p><blockquote><p>后台上传图片报错日志：<code>tail -f /www/wwwlogs/admin.xxx.com.error.log</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@xxx ~]# tail -f &#x2F;www&#x2F;wwwlogs&#x2F;admin.xxx.com.error.log</span><br><span class="line">2022&#x2F;01&#x2F;18 18:34:34 [crit] 21525#0: *134888 open() &quot;&#x2F;www&#x2F;server&#x2F;nginx&#x2F;client_body_temp&#x2F;0000000134&quot; failed (13: Permission denied), client: 120.27.173.36, server: admin.xxx.com, request: &quot;POST &#x2F;common&#x2F;upload&amp;responseType&#x3D;json HTTP&#x2F;1.1&quot;, host: &quot;admin.xxx.com&quot;, referrer: &quot;https:&#x2F;&#x2F;admin.xxx.com&#x2F;promotion&#x2F;edit.html?id&#x3D;183&quot; </span><br></pre></td></tr></table></figure></blockquote><blockquote><blockquote><p>前端也有类似报错：<code> tail -f /www/wwwlogs/m.xxx.com.error.log</code></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;tail -f &#x2F;www&#x2F;wwwlogs&#x2F;m.xxx.com.error.log</span><br><span class="line">&gt;2022&#x2F;01&#x2F;18 18:08:17 [crit] 21523#0: *105101 open() &quot;&#x2F;www&#x2F;server&#x2F;nginx&#x2F;fastcgi_temp&#x2F;2&#x2F;12&#x2F;0000000122&quot; failed (13: Permission denied) while reading upstream, client: 118.178.15.102, server: m.xxx.com, request: &quot;GET &#x2F;api&#x2F;product HTTP&#x2F;1.1&quot;, upstream: &quot;fastcgi:&#x2F;&#x2F;unix:&#x2F;tmp&#x2F;php-cgi-74.sock:&quot;, host: &quot;m.xxx.com&quot;, referrer: &quot;https:&#x2F;&#x2F;m.xxx.com&#x2F;product?tab&#x3D;qiye&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;tail -f &#x2F;www&#x2F;wwwlogs&#x2F;nginx_error.log</span><br><span class="line"></span><br><span class="line">&gt;layui.upload上传图片报错“请求上传接口出现异常”</span><br><span class="line"></span><br><span class="line">&gt;上传文件时发生 HTTP 错误(错误代码:500)</span><br><span class="line">&gt;2022&#x2F;01&#x2F;06 10:43:04 [crit] 20657#0: opendir() &quot;&#x2F;www&#x2F;server&#x2F;nginx&#x2F;proxy_cache_dir&quot; failed (13: Permission denied)</span><br><span class="line">&gt;2022&#x2F;01&#x2F;06 11:09:43 [alert] 21131#0: *38645 open socket #132 left in connection 54</span><br><span class="line">&gt;2022&#x2F;01&#x2F;06 11:09:43 [alert] 21131#0: aborting</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
    
    
    <summary type="html">记一次layui上传图片报错HTTP错误（错误代码：500）排查笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="layui" scheme="https://dragonersli.github.io/tags/layui/"/>
    
  </entry>
  
  <entry>
    <title>aliyun服务器cpu不稳定排查笔记!</title>
    <link href="https://dragonersli.github.io/2021/07/09/aliyun%E6%9C%8D%E5%8A%A1%E5%99%A8cpu%E4%B8%8D%E7%A8%B3%E5%AE%9A%E6%8E%92%E6%9F%A5%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2021/07/09/aliyun%E6%9C%8D%E5%8A%A1%E5%99%A8cpu%E4%B8%8D%E7%A8%B3%E5%AE%9A%E6%8E%92%E6%9F%A5%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2021-07-09T11:34:00.000Z</published>
    <updated>2024-05-12T18:14:16.987Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>cpu忽高忽低，负载100%。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">top #按c查看cpu和内存占用程序进程详细信息</span><br><span class="line">ps auxw|head -1;ps auxw|sort -rn -k4|head -50      #查看消耗内存最多的前50个进程</span><br><span class="line">ps -ef |grep &quot;php-fpm&quot;|grep &quot;pool&quot;|wc -l #查看服务器上一共开了多少的 php-cgi 进程</span><br><span class="line">netstat -anp|grep &quot;php-fpm&quot;|grep &quot;tcp&quot;|grep &quot;pool&quot;|wc -l #查看已经有多少个php-cgi进程用来处理tcp请求</span><br><span class="line"></span><br><span class="line">strace -p PID #跟踪占用CPU高的进程ID</span><br><span class="line">ll &#x2F;proc&#x2F;PID&#x2F;fd #查看该进程在处理哪些文件</span><br></pre></td></tr></table></figure><p><code>安装opcache缓存器加速php脚本</code></p><p><code>记录慢日志</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#&#x2F;www&#x2F;server&#x2F;php&#x2F;74&#x2F;etc&#x2F;php-fpm.conf </span><br><span class="line">request_slowlog_timeout &#x3D; 3 #php慢日志超过3秒记录</span><br><span class="line">slowlog &#x3D; &#x2F;var&#x2F;log&#x2F;slow.log #记录慢日志文件位置</span><br></pre></td></tr></table></figure><blockquote><p>服务器cpu原本8核16G，cpu忽高忽低。导致高至100%时访问出错或变慢。为了业务正常访问，先升级到16核32G，然后慢慢找原因。发现升级后还是老样子。只是相比原来改善了点。<br><code>top</code>按<code>c</code>查看<code>php-fpm</code>进程是哪个脚本占<code>cpu</code>。<br><code>ls -l /proc/PID</code>或<code>ll /proc/PID</code>查看进程详细信息，Linux在启动一个进程时，系统会在&#x2F;proc下创建一个以PID命名的文件夹，在该文件夹下会有我们的进程的信息，其中包括一个名为exe的文件即记录了绝对路径。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cwd符号链接的是进程运行目录</span><br><span class="line">exe符号连接就是执行程序的绝对路径</span><br><span class="line">cmdline就是程序运行时输入的命令行命令</span><br><span class="line">environ记录了进程运行时的环境变量</span><br><span class="line">fd目录下是进程打开或使用的文件的符号连接，&#96;ls &#x2F;proc&#x2F;PID&#96;可查看</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"> [root@paijinhua ~]# ls -l &#x2F;proc&#x2F;28273</span><br><span class="line">total 0</span><br><span class="line">dr-xr-xr-x 2 www  www  0 Jul  9 19:21 attr</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 autogroup</span><br><span class="line">-r-------- 1 root root 0 Jul  9 19:21 auxv</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 10:54 cgroup</span><br><span class="line">--w------- 1 root root 0 Jul  9 19:21 clear_refs</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 10:54 cmdline</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 10:54 comm</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 coredump_filter</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 cpuset</span><br><span class="line">lrwxrwxrwx 1 root root 0 Jul  9 11:00 cwd -&gt; &#x2F;www&#x2F;wwwroot&#x2F;PROJECT&#x2F;public</span><br><span class="line">-r-------- 1 root root 0 Jul  9 19:21 environ</span><br><span class="line">lrwxrwxrwx 1 root root 0 Jul  9 10:54 exe -&gt; &#x2F;www&#x2F;server&#x2F;php&#x2F;74&#x2F;sbin&#x2F;php-fpm</span><br><span class="line">dr-x------ 2 root root 0 Jul  9 10:55 fd</span><br><span class="line">dr-x------ 2 root root 0 Jul  9 19:21 fdinfo</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 gid_map</span><br><span class="line">-r-------- 1 root root 0 Jul  9 19:21 io</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 limits</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 loginuid</span><br><span class="line">dr-x------ 2 root root 0 Jul  9 19:21 map_files</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 maps</span><br><span class="line">-rw------- 1 root root 0 Jul  9 19:21 mem</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 mountinfo</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 mounts</span><br><span class="line">-r-------- 1 root root 0 Jul  9 19:21 mountstats</span><br><span class="line">dr-xr-xr-x 5 www  www  0 Jul  9 19:21 net</span><br><span class="line">dr-x--x--x 2 root root 0 Jul  9 19:21 ns</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 numa_maps</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 oom_adj</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 oom_score</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 oom_score_adj</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 pagemap</span><br><span class="line">-r-------- 1 root root 0 Jul  9 19:21 patch_state</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 personality</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 projid_map</span><br><span class="line">lrwxrwxrwx 1 root root 0 Jul  9 11:00 root -&gt; &#x2F;</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 sched</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 schedstat</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 sessionid</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 setgroups</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 smaps</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 stack</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 10:54 stat</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 11:00 statm</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 10:54 status</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 syscall</span><br><span class="line">dr-xr-xr-x 3 www  www  0 Jul  9 19:13 task</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 timers</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul  9 19:21 uid_map</span><br><span class="line">-r--r--r-- 1 root root 0 Jul  9 19:21 wchan</span><br><span class="line"></span><br><span class="line">[root@xxx]# ls &#x2F;proc&#x2F;1946</span><br><span class="line">attr       clear_refs       cpuset   fd       limits     mem         net        oom_score      personality  schedstat  stack   syscall  wchan</span><br><span class="line">autogroup  cmdline          cwd      fdinfo   loginuid   mountinfo   ns         oom_score_adj  projid_map   sessionid  stat    task</span><br><span class="line">auxv       comm             environ  gid_map  map_files  mounts      numa_maps  pagemap        root         setgroups  statm   timers</span><br><span class="line">cgroup     coredump_filter  exe      io       maps       mountstats  oom_adj    patch_state    sched        smaps      status  uid_map</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>cat /www/server/php/74/etc/php-fpm.conf</code>  查看最后两行php慢日志位置和时间。<br><code>tail -f /var/log/slow.log</code>查看日志内容，像流水一样哗哗记录。不过这些都是框架底层代码，<br>不是自己写的无法定位自己写的代码去优化。php性能追踪及分析工具<code>XHProf</code>也看不出来问题。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">error_log &#x3D; &#x2F;www&#x2F;server&#x2F;php&#x2F;74&#x2F;var&#x2F;log&#x2F;php-fpm.log</span><br><span class="line">log_level &#x3D; notice</span><br><span class="line"></span><br><span class="line">[www]</span><br><span class="line">listen &#x3D; &#x2F;tmp&#x2F;php-cgi-74.sock</span><br><span class="line">listen.backlog &#x3D; 8192</span><br><span class="line">listen.allowed_clients &#x3D; 127.0.0.1</span><br><span class="line">listen.owner &#x3D; www</span><br><span class="line">listen.group &#x3D; www</span><br><span class="line">listen.mode &#x3D; 0666</span><br><span class="line">user &#x3D; www</span><br><span class="line">group &#x3D; www</span><br><span class="line">pm &#x3D; ondemand</span><br><span class="line">pm.status_path &#x3D; &#x2F;phpfpm_74_status</span><br><span class="line">pm.max_children &#x3D; 120</span><br><span class="line">pm.start_servers &#x3D; 10</span><br><span class="line">pm.min_spare_servers &#x3D; 10</span><br><span class="line">pm.max_spare_servers &#x3D; 30</span><br><span class="line">request_terminate_timeout &#x3D; 30</span><br><span class="line">request_slowlog_timeout &#x3D; 3</span><br><span class="line">slowlog &#x3D; &#x2F;var&#x2F;log&#x2F;slow.log </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>排查：</strong> 第一行猜测应该是进程ID，<code>script_filename</code>都是入口<code>index.php</code>,根据下面框架底层代码文件判断大致问题所在。<br>既然有<code>session</code>，怀疑<code>session</code>配置有问题。驱动由<code>file</code>改成<code>cache</code>,在<code>cache</code>配置文件修改<code>default</code>默认驱动由<code>file</code>改成<code>redis</code>。然后添加<code>redis</code>缓存驱动！<br>既然有<code>db/PDOConnection.php</code>，那应该是sql问题，排查慢sql日志。</p></blockquote><p><code>thinkphp6的config目录下session.php配置文件</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line">&#x2F;&#x2F; | 会话设置</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">return [</span><br><span class="line">    &#x2F;&#x2F; session name</span><br><span class="line">    &#39;name&#39;           &#x3D;&gt; &#39;PHPSESSID&#39;,</span><br><span class="line">    &#x2F;&#x2F; SESSION_ID的提交变量,解决flash上传跨域</span><br><span class="line">    &#39;var_session_id&#39; &#x3D;&gt; &#39;&#39;,</span><br><span class="line">    &#x2F;&#x2F; 驱动方式 支持file cache</span><br><span class="line">    &#39;type&#39;           &#x3D;&gt; &#39;cache&#39;,</span><br><span class="line">    &#x2F;&#x2F; 存储连接标识 当type使用cache的时候有效</span><br><span class="line">    &#39;store&#39;          &#x3D;&gt; null,</span><br><span class="line">    &#x2F;&#x2F; 过期时间</span><br><span class="line">    &#39;expire&#39;         &#x3D;&gt; 86400,</span><br><span class="line">    &#x2F;&#x2F; 前缀</span><br><span class="line">    &#39;prefix&#39;         &#x3D;&gt; &#39;session_&#39;,</span><br><span class="line">];</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>thinkphp6的config目录下cache.php配置文件</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line">&#x2F;&#x2F; | 缓存设置</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">return [</span><br><span class="line">    &#x2F;&#x2F; 默认缓存驱动</span><br><span class="line">    &#39;default&#39; &#x3D;&gt; env(&#39;cache.driver&#39;, &#39;redis&#39;),</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 缓存连接方式配置</span><br><span class="line">    &#39;stores&#39;  &#x3D;&gt; [</span><br><span class="line">        &#39;file&#39; &#x3D;&gt; [</span><br><span class="line">            &#39;type&#39;       &#x3D;&gt; &#39;File&#39;,&#x2F;&#x2F; 驱动方式</span><br><span class="line">            &#39;path&#39;       &#x3D;&gt; &#39;&#39;, &#x2F;&#x2F; 缓存保存目录</span><br><span class="line">            &#39;prefix&#39;     &#x3D;&gt; &#39;&#39;,&#x2F;&#x2F; 缓存前缀</span><br><span class="line">            &#39;expire&#39;     &#x3D;&gt; 0, &#x2F;&#x2F; 缓存有效期 0表示永久缓存</span><br><span class="line">            &#39;tag_prefix&#39; &#x3D;&gt; &#39;tag:&#39;,&#x2F;&#x2F; 缓存标签前缀</span><br><span class="line">            &#39;serialize&#39;  &#x3D;&gt; [], &#x2F;&#x2F; 序列化机制 例如 [&#39;serialize&#39;, &#39;unserialize&#39;]</span><br><span class="line">        ],</span><br><span class="line">        &#x2F;&#x2F; 更多的缓存连接</span><br><span class="line">        &#x2F;&#x2F; redis缓存</span><br><span class="line">        &#39;redis&#39;   &#x3D;&gt;  [</span><br><span class="line">            &#39;type&#39;   &#x3D;&gt; &#39;redis&#39;,&#x2F;&#x2F; 驱动方式</span><br><span class="line">            &#39;host&#39;&#x3D;&gt;env(&#39;redis.host&#39;, &#39;127.0.0.1&#39;), &#x2F;&#x2F; 服务器地址</span><br><span class="line">            &#39;port&#39; &#x3D;&gt; env(&#39;redis.port&#39;, &#39;6379&#39;), </span><br><span class="line">            &#39;password&#39; &#x3D;&gt; env(&#39;redis.password&#39;, &#39;&#39;),</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-3811828380b62edc.png" alt="慢日志记录内容session"><br><img src="/../assets/imgs/2255249-fa3bed81ede19b24.png" alt="慢日志记录内容PDOConnection"><br><img src="/../assets/imgs/2255249-10145baf418f3d40.png" alt="更改驱动后redis记录的数据"></p><hr>]]></content>
    
    
    <summary type="html">aliyun服务器cpu不稳定排查笔记!</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="aliyun" scheme="https://dragonersli.github.io/tags/aliyun/"/>
    
  </entry>
  
  <entry>
    <title>aliyun固定公网IP转弹性IP笔记！</title>
    <link href="https://dragonersli.github.io/2021/04/28/aliyun%E5%9B%BA%E5%AE%9A%E5%85%AC%E7%BD%91IP%E8%BD%AC%E5%BC%B9%E6%80%A7IP%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2021/04/28/aliyun%E5%9B%BA%E5%AE%9A%E5%85%AC%E7%BD%91IP%E8%BD%AC%E5%BC%B9%E6%80%A7IP%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2021-04-28T10:21:51.000Z</published>
    <updated>2024-05-12T16:45:56.251Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>云服务器ECS<code>&gt;</code>实例与镜像<code>&gt;</code>实例<code>&gt;</code>实例列表找到要更换的实例ID&#x2F;名称<code>&gt;</code>升降配变更带宽收费模式为按量<code>&gt;</code>更多里变更弹性IP<br>（变更包年包月的公网带宽计费方式为按量收费，猜想可能是购买的EIP只有IP地址和带宽，已经包含了带宽。这边不用在包年包月重复收费了，变更时可能会遇到的问题，就是本月有其他项目退费过，金额超出本月可退金额，例如提示：<code>预计消耗退款额度: 50920，超出本月所剩退款额度: 30000 请下个月再进行操作。</code>，这时需要提供单或联系阿里云售后增加可退额度再执行下一步操作！）<br>变更后IP地址共有变成弹性，地址不变。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">按量付费指的是实例整体的计费是按量计费模式，不是指的公网带宽计费，</span><br><span class="line">如果需要核实带宽计费方式，您可以点击管理，进入到实例详情，付费信息位置，可以查看到带宽计费方式。</span><br><span class="line">对于按量付费的实例计费，计费的主要是实例费用。</span><br><span class="line">服务器没有配置系统自动分配的公网ip，配置的弹性EIP，后续公网的带宽都会通过弹性EIP的计费方式进行计费。</span><br><span class="line">目前计费就会分为两个部分，一个是实例本身的按量计费，一个是弹性EIP的公网带宽计费，是分别计费的，公网就会通过弹性EIP计费，不会通过服务器实例计费。</span><br></pre></td></tr></table></figure><p><strong>aliyun技术支持回复的操作步骤：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">您好，您可以参考以下的链接进行操作，请谨慎操作，此操作不可逆，如有其它问题请继续反馈工单。 </span><br><span class="line">第1步：更改公网带宽的计费方式。从按固定带宽计费变更为按使用流量计费。请您参看文档 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;99059.html </span><br><span class="line">第2步：将专有网络公网IP转换为弹性公网IP。请您参看文档 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;61290.html </span><br><span class="line">第3步：解绑弹性公网IP。将弹性公网IP和ECS服务器进行解绑。请您参看文档 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65204.html </span><br><span class="line">第4步：申请新的弹性公网IP。请您参看文档 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65203.html </span><br><span class="line">5步：将新的弹性公网IP绑定到ECS服务器上。请您参看文档 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;72125.html  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-d36316b7e99a337c.png" alt="image.png"></p><blockquote><p>专有网络<code>&gt;</code>弹性公网IP<br><code>上面是公网转过来的IP没变，属性从固定变成弹性；下面是购买的弹性公网IP。当有攻击或不想使用该IP可解除绑定，绑定资源到其他弹性公网IP</code></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可以将此绑定的弹性Eip解绑，申请新的Eip或者将已有的可以使用弹性EIP绑定到实例上，进行更换ip地址。例如您核实到的两个弹性EIP：一个是47.97.41.112 ip，一个是121.41.194.147，您将121.41.194.147 解绑，将47.97.41.112 绑定到实例上配置，就是在更换ip了。 解绑弹性ip：[https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65204.html](https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65204.html?spm&#x3D;5176.smartservice_service_chat.0.0.6d283f1bSO021z) 申请弹性ip：[https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65203.html](https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65203.html?spm&#x3D;5176.smartservice_service_chat.0.0.6d283f1bSO021z) 绑定弹性ip：[https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;72125.html](https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;72125.html)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-1f556159067db7c4.png" alt="image.png"></p><hr>]]></content>
    
    
    <summary type="html">aliyun固定公网IP转弹性IP笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>bt使用crontab笔记！</title>
    <link href="https://dragonersli.github.io/2021/01/02/bt%E4%BD%BF%E7%94%A8crontab%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2021/01/02/bt%E4%BD%BF%E7%94%A8crontab%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2021-01-01T19:04:00.000Z</published>
    <updated>2024-05-12T18:04:38.515Z</updated>
    
    <content type="html"><![CDATA[<p>####Shell脚本</p><blockquote><p>选择Shell脚本，执行周期设置每月17日9时0分，脚本内容是使用微信消息模板批量推送，用户数据太多，一次执行耗时太长。分成N个脚本同时处理，每次处理1&#x2F;N缩短执行时间。<code>任务名称1</code>对应脚本执行记录的<code>1.log</code>.也可不用等时间到，直接点击执行。然后查看日志是否执行。</p></blockquote><p><code>/www/server/php/56/bin/php /www/wwwroot/paijinhua/think notice 1 50000  &gt;&gt; /www/wwwlogs/1.log 2&gt;&amp;1</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace app\admin\command;</span><br><span class="line">use think\console\Command;</span><br><span class="line">use think\console\Input;</span><br><span class="line">use think\console\Output;</span><br><span class="line">use app\common\model\WxUser;</span><br><span class="line">use app\common\service\WechatService;</span><br><span class="line">use think\console\Input\Option;</span><br><span class="line">use think\console\Input\Argument;</span><br><span class="line">class Notice extends Command</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;定义任务名和描述</span><br><span class="line">    protected function configure()&#123;</span><br><span class="line">        &#x2F;&#x2F;设置参数</span><br><span class="line">        $this-&gt;addArgument(&#39;s&#39;,Argument::REQUIRED,&#39;s必填&#39;); &#x2F;&#x2F;必传参数</span><br><span class="line">        $this-&gt;addArgument(&#39;e&#39;,Argument::REQUIRED,&#39;e必填&#39;); &#x2F;&#x2F;必传参数</span><br><span class="line">        $this-&gt;setName(&#39;notice&#39;)-&gt;setDescription(&quot;php think notice 通知&quot;); &#x2F;&#x2F;选项定义</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;调用该类时,会自动运行execute方法</span><br><span class="line">    protected function execute(Input $input, Output $output)</span><br><span class="line">    &#123;</span><br><span class="line">        set_time_limit(0);</span><br><span class="line">        ini_set(&#39;memory_limit&#39;,&#39;512M&#39;); </span><br><span class="line">        $args &#x3D; $input-&gt;getArguments();</span><br><span class="line">        if(!$args[&#39;s&#39;] || !$args[&#39;e&#39;])&#123;</span><br><span class="line">            exit(&quot;参数s or e不能为空&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            $data &#x3D; WxUser::field(&#39;id,userId uid,wxOpenid openid&#39;)</span><br><span class="line">                -&gt;where(&quot;wxOpenid !&#x3D;&#39;&#39; and  id &gt;&#x3D; &#123;$args[&#39;s&#39;]&#125; and id &lt; &#123;$args[&#39;e&#39;]&#125; &quot;)</span><br><span class="line">                -&gt;group(&#39;wxOpenid&#39;)</span><br><span class="line">                 -&gt;order(&#39;id asc&#39;)</span><br><span class="line">                 -&gt;select();</span><br><span class="line">                foreach($data as $k&#x3D;&gt;$v)&#123;</span><br><span class="line">                     $res &#x3D;  WechatService::serviceTpl($v-&gt;openid);</span><br><span class="line">                    $msg &#x3D; ($res ? &#39;success&#39;:&#39;failed&#39;).&quot;:&quot;.$v-&gt;id . &#39;--&#39; .$v-&gt;uid.&#39;---&#39;. $v-&gt;openid;</span><br><span class="line">                    #dlog(&#39;wx—service&#39;, $msg); &#x2F;&#x2F;脚本做了日志记录，这里就不用了</span><br><span class="line">                    echo $msg . &quot;\n&quot;;</span><br><span class="line">                 &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-fe6069003edbd2b7.png" alt="Shell脚本添加"></p><p><img src="/../assets/imgs/2255249-a2a972d3cac32030.png" alt="脚本内容"></p><p>######脚本列表<br><img src="/../assets/imgs/2255249-d78e1954b3e0155e.png" alt="image.png"><br>####访问URL</p><blockquote><p>直接调用控制器方法，填入url，设置执行周期。如果分页通过缓存或者其它方式传值，也可设置多个url，通过url传参调用！</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace app\app\controller;</span><br><span class="line"></span><br><span class="line">use app\common\controller\Base;</span><br><span class="line">use app\common\model\WxUser;</span><br><span class="line"> </span><br><span class="line">class Error extends Base</span><br><span class="line">&#123;</span><br><span class="line">    public function __construct()</span><br><span class="line">    &#123;</span><br><span class="line">        parent::__construct();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 空控制器操作</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public function notice()</span><br><span class="line">    &#123;</span><br><span class="line">        set_time_limit(0);</span><br><span class="line">        ini_set(&#39;memory_limit&#39;,&#39;1000M&#39;);</span><br><span class="line"></span><br><span class="line">        $size &#x3D; 100;</span><br><span class="line">        $cache_page &#x3D; cache(&#39;crontab_notice_page&#39;);</span><br><span class="line">        $page &#x3D; !$cache_page ? 1 : ($cache_page + 1);</span><br><span class="line"></span><br><span class="line">        cache(&#39;crontab_notice_page&#39;,$page);</span><br><span class="line">        WxUser::field(&#39;id,userId uid,wxOpenid openid&#39;)</span><br><span class="line">            -&gt;where(&quot;wxOpenid !&#x3D;&#39;&#39; &quot;)</span><br><span class="line">            -&gt;group(&#39;wxOpenid&#39;)</span><br><span class="line">            -&gt;order(&#39;id asc&#39;)</span><br><span class="line">            -&gt;paginate($size, false, [</span><br><span class="line">                &#39;page&#39; &#x3D;&gt; $page</span><br><span class="line">            ]);</span><br><span class="line">        dlog(&#39;wx—service&#39;, WxUser::getLastSql());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-075c232a7cfa7b69.png" alt="每分钟调用一次URL"><br><img src="/../assets/imgs/2255249-d0f6b9c299b5b4c2.png" alt="执行调用写入日志的sql"><br>####木马查杀<br><img src="/../assets/imgs/2255249-ef1bd1b873ee2d8e.png" alt="木马查杀设置"></p><p><img src="/../assets/imgs/2255249-d35540a39ad4fb46.png" alt="面板设置消息通道"><br><img src="/../assets/imgs/2255249-1db702a8c2f78614.png" alt="定时脚本扫描到的木马文件"></p><hr>]]></content>
    
    
    <summary type="html">bt使用crontab笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="bt" scheme="https://dragonersli.github.io/tags/bt/"/>
    
  </entry>
  
  <entry>
    <title>windows忘记已连接的wifi密码操作！</title>
    <link href="https://dragonersli.github.io/2020/11/22/windows%E5%BF%98%E8%AE%B0%E5%B7%B2%E8%BF%9E%E6%8E%A5%E7%9A%84wifi%E5%AF%86%E7%A0%81%E6%93%8D%E4%BD%9C%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/11/22/windows%E5%BF%98%E8%AE%B0%E5%B7%B2%E8%BF%9E%E6%8E%A5%E7%9A%84wifi%E5%AF%86%E7%A0%81%E6%93%8D%E4%BD%9C%EF%BC%81/</id>
    <published>2020-11-22T10:27:00.000Z</published>
    <updated>2024-05-12T17:19:11.021Z</updated>
    
    <content type="html"><![CDATA[<p>#####一般人忘记已连接的wifi密码操作：打开<code>控制面板\网络和 Internet\网络和共享中心</code></p><h6 id="点连接：WLAN（wifi-name）、无限属性（W）、切换到安全选项卡显示字符（H）查看wifi密码"><a href="#点连接：WLAN（wifi-name）、无限属性（W）、切换到安全选项卡显示字符（H）查看wifi密码" class="headerlink" title="点连接：WLAN（wifi name）、无限属性（W）、切换到安全选项卡显示字符（H）查看wifi密码"></a>点连接：<code>WLAN（wifi name）</code>、<code>无限属性（W）</code>、切换到<code>安全</code>选项卡<code>显示字符（H）</code>查看wifi密码</h6><p><img src="/../assets/imgs/2255249-e903bb9972e58d65.png" alt="一般人windows忘记已连接的wifi密码操作！"></p><p>######程序员忘记wifi密码操作：<code>win+R</code>，输入<code>cmd</code>，然后再输入<code>netsh wlan show profiles</code>查看本电脑连接过的所有wifi列表。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\DragonersLi&gt;netsh wlan show profiles</span><br><span class="line"></span><br><span class="line">接口 WLAN 上的配置文件:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">组策略配置文件(只读)</span><br><span class="line">---------------------------------</span><br><span class="line">    &lt;无&gt;</span><br><span class="line"></span><br><span class="line">用户配置文件</span><br><span class="line">------------- </span><br><span class="line">    所有用户配置文件 : zhujiajiao </span><br><span class="line">    所有用户配置文件 : ChinaNet-Starbucks </span><br><span class="line">    所有用户配置文件 : costa free wifi </span><br><span class="line">    所有用户配置文件 : KFC FREE WIFI  </span><br><span class="line">    所有用户配置文件 : DragonersLi</span><br><span class="line">    所有用户配置文件 : Wechat-DragonersLi </span><br><span class="line">    所有用户配置文件 : Dragoners.Li&#39;s iphone 11 pro max</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>######输入<code>netsh wlan show profiles name=&quot;Wechat-DragonersLi&quot; key=&quot;clear&quot; </code>,查看<code>Wechat-DragonersLi</code>的wifi信息，其中关键内容就是wifi的密码。clear表示以明文方式显示密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\DragonersLi&gt;netsh wlan show profiles name&#x3D;Wechat-DragonersLi key&#x3D;clear</span><br><span class="line"></span><br><span class="line">接口 WLAN 上的配置文件 Wechat-DragonersLi:</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">已应用: 所有用户配置文件</span><br><span class="line"></span><br><span class="line">配置文件信息</span><br><span class="line">-------------------</span><br><span class="line">    版本                   : 1</span><br><span class="line">    类型                   : 无线局域网</span><br><span class="line">    名称                   : Wechat-DragonersLi</span><br><span class="line">    控制选项               :</span><br><span class="line">        连接模式           : 自动连接</span><br><span class="line">        网络广播           : 只在网络广播时连接</span><br><span class="line">        AutoSwitch         : 请勿切换到其他网络</span><br><span class="line">        MAC 随机化: 启用</span><br><span class="line"></span><br><span class="line">连接设置</span><br><span class="line">---------------------</span><br><span class="line">    SSID 数目              : 1</span><br><span class="line">    SSID 名称              :“Wechat-DragonersLi”</span><br><span class="line">    网络类型               : 结构</span><br><span class="line">    无线电类型             : [ 任何无线电类型 ]</span><br><span class="line">    供应商扩展名           : 不存在</span><br><span class="line"></span><br><span class="line">安全设置</span><br><span class="line">-----------------</span><br><span class="line">    身份验证         : WPA2 - 个人</span><br><span class="line">    密码                 : CCMP</span><br><span class="line">    身份验证         : WPA2 - 个人</span><br><span class="line">    密码                 : GCMP</span><br><span class="line">    安全密钥               : 存在</span><br><span class="line">    关键内容            : DragonersLi #wifi密码</span><br><span class="line"></span><br><span class="line">费用设置</span><br><span class="line">-------------</span><br><span class="line">    费用                : 无限制</span><br><span class="line">    阻塞                : 否</span><br><span class="line">    接近数据限制        : 否</span><br><span class="line">    过量数据限制        : 否</span><br><span class="line">    漫游                : 否</span><br><span class="line">    费用来源            : 默认</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\Users\DragonersLi&gt;</span><br></pre></td></tr></table></figure><p>#####wifi密码等信息存储位置在<code>C:\ProgramData\Microsoft\Wlansvc\Profiles\Interfaces</code>,通过文本工具打开，根据<code>name</code>确定<code>wifi</code>,发现文件名为<code>&#123;72CD9E0B-1F16-45DC-8511-78C2C5E08E4E&#125;</code>是要查看wifi密码的文件，但是wifi密码被加密过了，我们可以通过脚本程序解密。<br><img src="/../assets/imgs/2255249-aa19a670261532f8.png" alt="wifi信息文件存储位置"></p><p>######以下代码另存为<code>.bat</code>文件，双击运行，会列出所有已连接过的wifi列表，然后输入要获取密码的<code>wifi-name</code>，则导出<code>WLAN-&#123;wifi-name&#125;.xml</code>,其中<code>keyMaterial</code>值就是wifi密码了&#96; </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">::  author DragonersLi 865196792@qq.com</span><br><span class="line">netsh wlan show profile</span><br><span class="line">set &#x2F;p wifi_name&#x3D;Please enter the WIFI name to view the password:</span><br><span class="line">echo %wifi_name%</span><br><span class="line">netsh wlan export profile name&#x3D;&quot;%wifi_name%&quot; folder&#x3D;. key&#x3D;clear</span><br><span class="line">::  Open the file</span><br><span class="line">::  start &quot;&quot; %cd%&quot;\WLAN-%wifi_name%.xml&quot;</span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;*&quot; %%i in (&#39;findstr &quot;&lt;keyMaterial&gt;.*&lt;&#x2F;keyMaterial&gt;&quot; %cd%&quot;\WLAN-%wifi_name%.xml&quot;&#39;)do set &quot;s&#x3D;%%i&quot;</span><br><span class="line">set &quot;s&#x3D;%s:&quot;&#x3D;“”%&quot;</span><br><span class="line">for &#x2F;f &quot;delims&#x3D;&lt;&quot; %%j in (&quot;%s:*&lt;keyMaterial&gt;&#x3D;%&quot;)do set &quot;keyMaterial&#x3D;%%j&quot;</span><br><span class="line">set &quot;keyMaterial&#x3D;%keyMaterial:“”&#x3D;&quot;%&quot;</span><br><span class="line">echo The WIFI password you want is: %keyMaterial%</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-c9a92162e77c9644.png" alt="WLAN-Wechat-DragonersLi.xml文件内容如下，其中keyMaterial为wifi密码值"></p><p>####扩展学习：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line"></span><br><span class="line">列出所有可连接wifi详细信息：netsh wlan show networks mode&#x3D;bssid</span><br><span class="line">为cmd&#x2F;powershell设置代理netsh winhttp set proxy 127.0.0.1:1080</span><br><span class="line">取消代理netsh winhttp reset proxy</span><br><span class="line">查看代理netsh winhttp show proxy</span><br><span class="line"></span><br><span class="line"> 手动连接：Netsh WLAN set profileparameter name&#x3D;&quot;&quot; connectionmode&#x3D;manual</span><br><span class="line"> 自动连接： Netsh WLAN set profileparameter name&#x3D;&quot;&quot; connectionmode&#x3D;auto</span><br><span class="line"></span><br><span class="line"> 列出配置文件：netsh wlan show profiles name&#x3D;* key&#x3D;clear 遍历所有name</span><br><span class="line"> 列出配置文件：netsh wlan show profiles【显示本机保存的profiles,配置文件是以wifi的ssid命名】</span><br><span class="line"></span><br><span class="line"> 列出配置文件：netsh wlan show profile</span><br><span class="line"> 导出配置文件：netsh wlan export profile key&#x3D;clear</span><br><span class="line"> 删除配置文件：netsh wlan delete profile name&#x3D;&quot;&quot; </span><br><span class="line"> 添加配置文件：netsh wlan add profile filename&#x3D;&quot;&quot;</span><br><span class="line"></span><br><span class="line"> 断开连接热点： netsh wlan disconnect</span><br><span class="line"> 连接指定热点：netsh wlan connect name&#x3D;&quot;wifi name&quot; </span><br><span class="line"> 列出无线接口：netsh wlan show interface </span><br><span class="line"> 开启无线接口：netsh interface set interface &quot;Interface Name&quot; enabled</span><br><span class="line"> </span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
    <summary type="html">windows忘记已连接的wifi密码操作！</summary>
    
    
    
    <category term="windows" scheme="https://dragonersli.github.io/categories/windows/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>windows给文件夹加密操作！</title>
    <link href="https://dragonersli.github.io/2020/11/22/windows%E7%BB%99%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8A%A0%E5%AF%86%E6%93%8D%E4%BD%9C%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/11/22/windows%E7%BB%99%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8A%A0%E5%AF%86%E6%93%8D%E4%BD%9C%EF%BC%81/</id>
    <published>2020-11-22T08:42:00.000Z</published>
    <updated>2022-01-14T07:16:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>######复制如下命令存为bat文件，其中<code>Hello</code>为私密文件夹名称，<code>PASSWORD</code>为进入私密文件夹的密码。私密文件夹名和密码都可自定义更改，最好不要用中文。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">cls</span><br><span class="line">@ECHO OFF</span><br><span class="line">title Folder Hello</span><br><span class="line">if EXIST &quot;HTG Locker&quot; goto UNLOCK</span><br><span class="line">if NOT EXIST Hello goto MDLOCKER</span><br><span class="line">:CONFIRM</span><br><span class="line">echo &quot;Are you sure you want to encrypt the hidden folder ? (Y&#x2F;N)&quot;</span><br><span class="line">set&#x2F;p &quot;cho&#x3D;&gt;&quot;</span><br><span class="line">if %cho%&#x3D;&#x3D;Y goto LOCK</span><br><span class="line">if %cho%&#x3D;&#x3D;y goto LOCK</span><br><span class="line">if %cho%&#x3D;&#x3D;n goto END</span><br><span class="line">if %cho%&#x3D;&#x3D;N goto END</span><br><span class="line">echo Invalid choice.</span><br><span class="line">goto CONFIRM</span><br><span class="line">:LOCK</span><br><span class="line">ren Hello &quot;HTG Locker&quot;</span><br><span class="line">attrib +h +s &quot;HTG Locker&quot;</span><br><span class="line">echo Folder locked</span><br><span class="line">goto End</span><br><span class="line">:UNLOCK</span><br><span class="line">echo &quot;Enter the password to enter your folder !&quot;</span><br><span class="line">set&#x2F;p &quot;pass&#x3D;&gt;&quot;</span><br><span class="line">if NOT %pass%&#x3D;&#x3D; PASSWORD goto FAIL</span><br><span class="line">attrib -h -s &quot;HTG Locker&quot;</span><br><span class="line">ren &quot;HTG Locker&quot; Hello</span><br><span class="line">echo Folder Unlocked successfully</span><br><span class="line">goto End</span><br><span class="line">:FAIL</span><br><span class="line">echo Invalid password</span><br><span class="line">goto end</span><br><span class="line">:MDLOCKER</span><br><span class="line">md Hello</span><br><span class="line">echo Hello created successfully</span><br><span class="line">goto End</span><br><span class="line">:End</span><br></pre></td></tr></table></figure><p>1.生成私密目录：<code>bat文件放在要生成私密文件夹的位置，双击就会生成Hello文件夹。</code><br>2.隐藏私密目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;Are you sure you want to encrypt the hidden folder ? (Y&#x2F;N)&quot;</span><br><span class="line">&gt;Y #输入Y回车就会隐藏刚生成的Hello文件夹</span><br></pre></td></tr></table></figure><p>3.进入私密目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;Enter the password to enter your folder !&quot;</span><br><span class="line">&gt;PASSWORD #输入密码，正确则私密文件夹显示出来,错误则不会显示</span><br></pre></td></tr></table></figure><p>4.再次隐藏</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;Are you sure you want to encrypt the hidden folder ? (Y&#x2F;N)&quot;</span><br><span class="line">&gt;Y #输入Y回车就会隐藏Hello文件夹</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
    <summary type="html">windows给文件夹加密操作！</summary>
    
    
    
    <category term="windows" scheme="https://dragonersli.github.io/categories/windows/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
    <category term="dos" scheme="https://dragonersli.github.io/tags/dos/"/>
    
  </entry>
  
  <entry>
    <title>记一次linux服务器上结束定时任务笔记！</title>
    <link href="https://dragonersli.github.io/2020/11/15/%E8%AE%B0%E4%B8%80%E6%AC%A1linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%BB%93%E6%9D%9F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/11/15/%E8%AE%B0%E4%B8%80%E6%AC%A1linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%BB%93%E6%9D%9F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2020-11-15T09:44:00.000Z</published>
    <updated>2022-08-10T07:08:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>######<code>linux</code>在<code>crontab</code>设置了定时任务。执行的时候发现程序有问题，想结束任务。注释了任务，并且在代码方法里<code>exit()</code>,但<code>tail -f /www/wwwroot/project/logs/2020-02-03</code>日志还在不停写入。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># &#x2F;etc&#x2F;crontab:  2号3点4分执行up脚本</span><br><span class="line">#4 3 2 * * root &#x2F;www&#x2F;server&#x2F;php&#x2F;56&#x2F;bin&#x2F;php &#x2F;www&#x2F;wwwroot&#x2F;project&#x2F;think up</span><br></pre></td></tr></table></figure><p>######查找该程序运行的PID，然后<code>kill -9 PID</code>结束进程</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ps命令将某个进程显示出来;grep命令是查找；中间的|是管道命令 是指ps命令与grep同时执行</span><br><span class="line"></span><br><span class="line">ps -ef|grep up #对于一个进程，每次运行后PID是不一样的</span><br><span class="line">UID       PID       PPID      C     STIME    TTY       TIME         CMD</span><br><span class="line">root     30951 32512  0 10:51 pts&#x2F;2    00:00:00 grep --color&#x3D;auto up</span><br><span class="line">root     31138 32512  0 10:51 pts&#x2F;2    00:00:00 grep --color&#x3D;auto up</span><br><span class="line"></span><br><span class="line"># kill -9 31138 </span><br><span class="line">-bash: kill: (31138 ) - No such process</span><br><span class="line"></span><br><span class="line">UID      ：程序被该 UID 所拥有 </span><br><span class="line">PID      ：就是这个程序的 ID  </span><br><span class="line">PPID    ：则是其上级父程序的ID </span><br><span class="line">C          ：CPU使用的资源百分比 </span><br><span class="line">STIME ：系统启动时间 </span><br><span class="line">TTY     ：登入者的终端机位置 </span><br><span class="line">TIME   ：使用掉的CPU时间。 </span><br><span class="line">CMD   ：所下达的是什么指令</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
    <summary type="html">记一次linux服务器上结束定时任务笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>windows制作微信qq等聊天窗口轰炸机代码！</title>
    <link href="https://dragonersli.github.io/2020/11/10/windows%E5%88%B6%E4%BD%9C%E5%BE%AE%E4%BF%A1qq%E7%AD%89%E8%81%8A%E5%A4%A9%E7%AA%97%E5%8F%A3%E8%BD%B0%E7%82%B8%E6%9C%BA%E4%BB%A3%E7%A0%81%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/11/10/windows%E5%88%B6%E4%BD%9C%E5%BE%AE%E4%BF%A1qq%E7%AD%89%E8%81%8A%E5%A4%A9%E7%AA%97%E5%8F%A3%E8%BD%B0%E7%82%B8%E6%9C%BA%E4%BB%A3%E7%A0%81%EF%BC%81/</id>
    <published>2020-11-10T05:50:00.000Z</published>
    <updated>2024-05-12T17:14:19.127Z</updated>
    
    <content type="html"><![CDATA[<p>######windows10下复制如下代码，另存为<code>文件名.vbs</code>，保存类型为所有文件，编码为<code>UTF-8</code>,代码中<code>轰炸机~</code>为轰炸对象，循环100次，每次程序休眠1000毫秒。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Set WshShell&#x3D;WScript.CreateObject(&quot;WScript.Shell&quot;)</span><br><span class="line">WshShell.AppActivate&quot;轰炸机&quot;</span><br><span class="line">for i &#x3D; 1 to 100</span><br><span class="line">WScript.Sleep 1000</span><br><span class="line">WshShell.SendKeys&quot;^v&quot;</span><br><span class="line">WshShell.SendKeys i</span><br><span class="line">WshShell.SendKeys&quot;%s&quot;</span><br><span class="line">Next</span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-81b099cdbd499275.png" alt="如果文件格式编码等有问题则弹框提升错误！"></p><p> ####在聊天窗口或者任意可以输入文字的地方，打上一段话复制，然后双击该vbs文件，然后把光标移回文本输入框，则可以看到连续不断输出，直至循环结束。如果不想发送，从文本输入框移走光标。<br><img src="/../assets/imgs/2255249-b6c0ddca0934d76b.png" alt="image.png"></p><hr>]]></content>
    
    
    <summary type="html">windows制作微信qq等聊天窗口轰炸机代码！</summary>
    
    
    
    <category term="windows" scheme="https://dragonersli.github.io/categories/windows/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
    <category term="效率工具" scheme="https://dragonersli.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>windows下redis报错auth失败，解决笔记！</title>
    <link href="https://dragonersli.github.io/2020/08/07/bt%E4%B8%8Bredis%E6%8A%A5%E9%94%99auth%E8%AE%A4%E8%AF%81%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/08/07/bt%E4%B8%8Bredis%E6%8A%A5%E9%94%99auth%E8%AE%A4%E8%AF%81%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2020-08-07T10:29:00.000Z</published>
    <updated>2024-05-12T18:05:07.953Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>宝塔redis重置密码</strong><br>宝塔设置redis新密码<code>requirepass</code>，命令行重置密码和置空密码都无用：<br>最后发现<code>/www/server/redis/redis.conf</code>配置文件有两个<code>requirepass</code>。<br>宝塔面板修改redis密码是上面一个，被下面一个旧的覆盖了。<br> ######修改配置文件后，要重启redis服务。否则刚修改的密码没生效！</p></blockquote><blockquote><p>宝塔redis客户端工具、网站、命令行登录认证的各种报错如下：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WRONGPASS invalid username-password pair or user is disabled.</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(error) NOAUTH Authentication required.</span><br><span class="line">(error) WRONGPASS invalid username-password pair or user is disabled.</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#96;AUTH&#96; failed: ERR AUTH &lt;password&gt; called without any password configured for the default user. </span><br><span class="line">Are you sure your configuration is correct? [tcp:&#x2F;&#x2F;127.0.0.1:6379]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(error) ERR AUTH &lt;password&gt; called without any password configured for the default user. </span><br><span class="line">Are you sure your configuration is correct?</span><br></pre></td></tr></table></figure><blockquote><p>命令行重设密码: <code>config set requirepass &quot;admin&quot;  </code></p></blockquote><blockquote><p>命令行登录redis：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@xxx redis]# service redis restart  #重启redis服务</span><br><span class="line">[root@xxx redis]# redis-cli   </span><br><span class="line">127.0.0.1:6379&gt; auth password</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt;  exit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@xxx redis]# redis-cli -h 127.0.0.1 -p 6379 -a password </span><br><span class="line">Warning: Using a password with &#39;-a&#39; or &#39;-u&#39; option on the command line interface may not be safe.</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;redisutil&quot;</span><br><span class="line">2) &quot;ranks&quot;</span><br><span class="line">127.0.0.1:6379&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>windows宝塔安装的redis代码中连接报错：<br><code>redis :ERR AUTH ＜password＞ called without any password configured for the default user</code><br>试着宝塔上停用redis，但命令行还是可以连接。怀疑是不是开了两个实例。<br><strong>解决</strong>：**<code>Ctrl+shift+Esc</code>结束<code>redis-server</code>和<code>redis-cli</code>所有进程。重启<code>redis</code>，代码连接也ok了**</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#密码对却提示：在没有为默认用户配置任何密码的情况下调用ERR AUTH&lt;password&gt;。你确定你的配置正确吗？</span><br><span class="line">127.0.0.1:6379&gt; auth root</span><br><span class="line">(error) ERR AUTH &lt;password&gt; called without any password configured for the default user. Are you sure your configuration is correct?</span><br><span class="line">127.0.0.1:6379&gt;</span><br><span class="line">redis&gt;redis-cli -h 127.0.0.1 -p 6379 -a root</span><br><span class="line">Warning: Using a password with &#39;-a&#39; or &#39;-u&#39; option on the command line interface may not be safe.</span><br><span class="line">Warning: AUTH failed</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line">127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;lucy&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">redis&gt;redis-cli -h 127.0.0.1 -p 6379 -a root</span><br><span class="line">Warning: Using a password with &#39;-a&#39; or &#39;-u&#39; option on the command line interface may not be safe.</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
    <summary type="html">windows下redis报错auth失败，解决笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="bt" scheme="https://dragonersli.github.io/tags/bt/"/>
    
    <category term="redis" scheme="https://dragonersli.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>windows下redis报错auth失败，解决笔记！</title>
    <link href="https://dragonersli.github.io/2020/08/07/windows%E4%B8%8Bredis%E6%8A%A5%E9%94%99auth%E5%A4%B1%E8%B4%A5%EF%BC%8C%E8%A7%A3%E5%86%B3%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/08/07/windows%E4%B8%8Bredis%E6%8A%A5%E9%94%99auth%E5%A4%B1%E8%B4%A5%EF%BC%8C%E8%A7%A3%E5%86%B3%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2020-08-07T10:29:00.000Z</published>
    <updated>2024-05-12T17:15:11.479Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#96;AUTH&#96; failed: ERR AUTH &lt;password&gt; called without any password configured for the default user. </span><br><span class="line">Are you sure your configuration is correct? [tcp:&#x2F;&#x2F;127.0.0.1:6379]</span><br></pre></td></tr></table></figure><p>######windows安装的宝塔环境。重置密码之后突然发现连接不上了。报错如上！<br><img src="/../assets/imgs/2255249-1cfaeb72394d0f1f.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-fd7b0e8dda8d0b64.png" alt="image.png"><br>######重装redis也无法解决，最后解决方法：命令行重设密码！</p><pre><code>D:\WorkPlace\BtSoft\redis&gt;redis-cli  #切换到redis安装目录，启动redis客户端命令行127.0.0.1:6379&gt; auth 123456#试一下改的密码，发现验证失败(error) ERR AUTH &lt;password&gt; called without any password configured for the default user. Are you sure your configuration is correct?127.0.0.1:6379&gt; config set requirepass &quot;admin&quot;  #命令行重设密码OK127.0.0.1:6379&gt; auth admin #用新密码验证okOK127.0.0.1:6379&gt;___</code></pre>]]></content>
    
    
    <summary type="html">windows下redis报错auth失败，解决笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="redis" scheme="https://dragonersli.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>api版本控制的几种方式！</title>
    <link href="https://dragonersli.github.io/2020/07/29/api%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2020/07/29/api%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%81/</id>
    <published>2020-07-29T06:08:00.000Z</published>
    <updated>2024-05-12T16:55:54.360Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>######一、通过url后面跟参数版本，例如：<code>xxx.com?version=v1</code>，兼容项目，一般不建议这么使用。</p></blockquote><blockquote><p>######二、通过配置子域名或模块方式，例如：<code>v1.xxx.com</code>、<code>v2.xxx.com</code>两个子域名来分别对应项目的两个模块，或者<code>xxx.com/v1</code>、<code>xxx.com/v2</code></p></blockquote><blockquote><p>######三、对于API应用，<code>单模块</code>+<code>多级控制器</code>实现<br><img src="/../assets/imgs/2255249-581ba380ff61e5f6.png" alt="image.png"></p></blockquote><blockquote><p>######创建版本控制器：<code>php think make:controller v1/Index</code><br>######请求时候url地址上要跟上版本号，例如：<code>xxx.com/api/v1/index</code>.路由<code>api.php</code>配置如下：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#路由配置</span><br><span class="line">use think\facade\Route; </span><br><span class="line">Route::group(&#39;:version&#39;,function()&#123;</span><br><span class="line"></span><br><span class="line">    Route::group(&#39;index&#39;, function () &#123;</span><br><span class="line">        Route::get(&#39;&#39;,&#39;api&#x2F;:version.Index&#x2F;test&#39;); </span><br><span class="line">        Route::get(&#39;agreement&#x2F;:id&#39;,&#39;api&#x2F;:version.Index&#x2F;test1&#39;)-&gt;pattern([&#39;id&#39; &#x3D;&gt; &#39;\d+&#39;]);</span><br><span class="line">        Route::get(&#39;logout&#39;, &#39;api&#x2F;:version.Index&#x2F;test2&#39;)-&gt;middleware(&#39;ApiJwt&#39;);</span><br><span class="line"></span><br><span class="line">    &#125;); </span><br><span class="line">&#125;)-&gt;allowCrossDomain();</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>######四、通过header头信息传递版本号。优点是版本更迭不需改变url地址，直接改变请求头信息<br>######接口请求地址：<code>xxx.com/api/index</code>，版本通过header中的<code>api-version</code>参数传递，默认<code>v1</code>版本！</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">use think\facade\Route;</span><br><span class="line">use think\facade\Request;</span><br><span class="line">$version &#x3D; Request::header(&#39;api-version&#39;,&#39;v1&#39;);#接口版本</span><br><span class="line">Route::group(&#39;&#39;, function()use($version)&#123;</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F;测试</span><br><span class="line">    Route::group(&#39;index&#39;, function () use($version)&#123;</span><br><span class="line">        Route::get(&#39;&#39;,&quot;api&#x2F;&#123;$version&#125;.Index&#x2F;index&quot;);</span><br><span class="line">        Route::get(&#39;test&#39;,&quot;&#123;$version&#125;.Index&#x2F;test&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">&#125;)-&gt;allowCrossDomain();</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>######五、通过<code>Accept</code>头信息处理，优点是可以设置接口输出格式。这种没使用过，待实现…</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET xxx.com&#x2F;user&#x2F;1</span><br><span class="line">Accept: application&#x2F;vnd.tp6.v1+json</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
    <summary type="html">api版本控制的几种方式！</summary>
    
    
    
    <category term="php" scheme="https://dragonersli.github.io/categories/php/"/>
    
    
    <category term="php" scheme="https://dragonersli.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>aliyun数据库使用笔记！</title>
    <link href="https://dragonersli.github.io/2019/12/24/aliyun%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/12/24/aliyun%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2019-12-23T18:54:00.000Z</published>
    <updated>2024-05-12T18:00:29.134Z</updated>
    
    <content type="html"><![CDATA[<p>######云数据库RDS 实例列表 点击实例名称<br>######账号管理  创建账号和权限<br>######数据库管理  创建数据库<br>####数据安全性 白名单设置<br>######数据库连接  登录数据库<br>######云服务器ECS实例可用区：华东 1 可用区 F<br><img src="/../assets/imgs/2255249-67deb8316a84b991.png" alt="image.png"><br>######云数据库RDS版可用区：华东 1 可用区 F<br>######（原本在华东 1 可用区 H，官网说用内网访问快于外网访问，内网又需要在同一可用区）<br><img src="/../assets/imgs/2255249-a26689fc1ae0b1ce.png" alt="image.png"></p><p>#####工单问答：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> RDS 实例ID ： rm-bp17d37nj6urj0t4m</span><br><span class="line">数据库引擎 ： MySQL5.6</span><br><span class="line">具体操作说明 ： 设置白名单</span><br><span class="line">问题描述 ： 之前买了高仿服务，设置了回源地址。云数据库设置白名单的地址。</span><br><span class="line">是我们服务器的IP地址还是这些回源地址？   </span><br><span class="line">售后工程师 :    您好:</span><br><span class="line">应该是服务器IP，您添加服务器IP试下，如有问题麻烦您再反馈下。   </span><br><span class="line"> ****** :   你好，我创建了账户，也创建了数据库绑定了账户，给了读写权限。</span><br><span class="line">RDS数据库登录。没有让输入账号密码。但是登录失败。</span><br><span class="line">用外部mysql工具，输入内网连接地址和账号密码。无法登陆。</span><br><span class="line">请教怎么在外部用navicat连接，谢谢</span><br><span class="line"> ****** :    测试连接没反应。我想问下。</span><br><span class="line">代码里和navicat工具怎么连接云数据库。是不是白名单设置的不对，</span><br><span class="line">用外网地址和内网地址都连接不上。</span><br><span class="line">设置的3个ip，一个是正式环境，一个是测试环境，一个是本机公网地址。</span><br><span class="line"> 售后工程师 :    您好： </span><br><span class="line"> 我看到这些IP添加了专有网络类白名单中，</span><br><span class="line">您将这些公网IP添加到经典网络类白名单中再试下。专有网络类白名单只对内网生效。   </span><br><span class="line"> ****** :   果然是白名单IP设置的问题。现在专有网络改成经典网络可以了，非常感谢！！  </span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-7af779ac625e183d.png" alt="image.png"></p><p>######专有网络为内网访问【白名单IP为服务器私网IP（云服务器  实例  IP地址（私有））】；经典网络及外网地址【白名单IP为服务器公网IP（云服务器  实例  IP地址（公））】。<br><img src="/../assets/imgs/2255249-30c0585c5e6e3c12.png" alt="image.png"></p><p> <img src="/../assets/imgs/2255249-232df1387549409f.png" alt="image.png"></p><h5 id="外网地址访问【代码数据库配置文件，服务器mysql命令连接，navicat工具-】"><a href="#外网地址访问【代码数据库配置文件，服务器mysql命令连接，navicat工具-】" class="headerlink" title="外网地址访问【代码数据库配置文件，服务器mysql命令连接，navicat工具 】"></a>外网地址访问【代码数据库配置文件，服务器mysql命令连接，navicat工具 】</h5><p><code>mysql -h xxxx.mysql.rds.aliyuncs.com -u USERNAME -pPASSWORD</code><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果云服务器ECS实例可用区和云数据库RDS版可用区不一致只能用外网访问。 </span><br></pre></td></tr></table></figure><br>####测试配置正确与否：<br>######mysql测试代码，放入index.php同级目录。把代码中内网地址、外网地址改成RDS云数据库的，用<code>域名/mysql.php测试</code>,通过说明配置ok！<br>因正式服务器ECS和数据库RDS在同一可用区，用外网和内网都可连接。测试服务器ECS和数据库RDS不在同一可用区，用外网连接ok，内网连接出错！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;MySql数据库测试信息...</span><br><span class="line">&lt;&#x2F;title&gt;</span><br><span class="line">&lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;utf-8&quot;&gt;&lt;&#x2F;head&gt;</span><br><span class="line">&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">body &#123;font-size:12px&#125;</span><br><span class="line">td &#123;font:12px&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">if(isset($_POST[host]))&#123;&#x2F;&#x2F;提交了</span><br><span class="line">$db_lk&#x3D;@mysql_connect(&quot;$_POST[host]&quot;,&quot;$_POST[loginuser]&quot;,&quot;$_POST[loginpw]&quot;);</span><br><span class="line">if($db_lk)&#123;</span><br><span class="line">if(mysql_select_db($_POST[usedb]))&#123;</span><br><span class="line">$msg&#x3D;&quot;服务器连接成功！&lt;br&gt;数据库使用成功..&quot;;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">$msg&#x3D;&quot;服务器连接成功！&lt;br&gt;数据库使用失败..&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">$msg&#x3D;&quot;服务器[$_POST[host]]连接失败！&lt;br&gt;错误代号:&quot;.mysql_errno().&quot;&lt;br&gt;错误信息:&quot;.mysql_error();</span><br><span class="line">&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">$msg&#x3D;&quot;未进行连接测试...&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;body bgcolor&#x3D;&quot;#FFFFFF&quot;&gt;</span><br><span class="line">&lt;form name&#x3D;&quot;form1&quot; method&#x3D;&quot;post&quot; action&#x3D;&quot;&quot;&gt;</span><br><span class="line">&lt;div align&#x3D;center id&#x3D;&quot;layer1&quot;&gt;</span><br><span class="line">&lt;table width&#x3D;&quot;300&quot; border&#x3D;&quot;0&quot; align&#x3D;&quot;center&quot; cellpadding&#x3D;&quot;3&quot; cellspacing&#x3D;&quot;0&quot; bordercolor&#x3D;&quot;#996699&quot; bgcolor&#x3D;&quot;#CCCC99&quot;&gt;</span><br><span class="line">  &lt;tr&gt; </span><br><span class="line">    &lt;td width&#x3D;&quot;92&quot;&gt;&lt;p&gt;主机&lt;&#x2F;p&gt;&lt;&#x2F;td&gt;</span><br><span class="line">    &lt;td width&#x3D;&quot;192&quot;&gt;&lt;select name&#x3D;&quot;host&quot;&gt;</span><br><span class="line">          &lt;option value&#x3D;&quot;127.0.0.1&quot;&gt;127.0.0.1&lt;&#x2F;option&gt;</span><br><span class="line">          &lt;option value&#x3D;&quot;localhost&quot;&gt;localhost&lt;&#x2F;option&gt;</span><br><span class="line">          &lt;option value&#x3D;&quot;内网地址&quot;&gt;内网地址&lt;&#x2F;option&gt;</span><br><span class="line">          &lt;option value&#x3D;&quot;外网地址&quot;&gt;外网地址&lt;&#x2F;option&gt;</span><br><span class="line">        &lt;&#x2F;select&gt;&lt;&#x2F;td&gt;</span><br><span class="line">  &lt;&#x2F;tr&gt;</span><br><span class="line">  &lt;tr&gt; </span><br><span class="line">    &lt;td&gt;连接帐户&lt;&#x2F;td&gt;</span><br><span class="line">    &lt;td&gt;&lt;input name&#x3D;&quot;loginuser&quot; type&#x3D;&quot;text&quot; id&#x3D;&quot;loginuser&quot; value&#x3D;&quot;&lt;?&#x3D;$_POST[loginuser]?&gt;&quot; onkeyup&#x3D;&quot;this.form.usedb.value&#x3D;this.value+&#39;_db&#39;&quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">  &lt;&#x2F;tr&gt;</span><br><span class="line">  &lt;tr&gt; </span><br><span class="line">    &lt;td&gt;连接密码&lt;&#x2F;td&gt;</span><br><span class="line">    &lt;td&gt;&lt;input name&#x3D;&quot;loginpw&quot; type&#x3D;&quot;text&quot; id&#x3D;&quot;loginpw&quot; value&#x3D;&quot;&lt;?&#x3D;$_POST[loginpw]?&gt;&quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">  &lt;&#x2F;tr&gt;</span><br><span class="line">  &lt;tr&gt;</span><br><span class="line">    &lt;td&gt;使用数据库&lt;&#x2F;td&gt;</span><br><span class="line">    &lt;td&gt;&lt;input name&#x3D;&quot;usedb&quot; type&#x3D;&quot;text&quot; id&#x3D;&quot;usedb&quot; value&#x3D;&quot;&lt;?&#x3D;$_POST[usedb]?&gt;&quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">  &lt;&#x2F;tr&gt;</span><br><span class="line">  &lt;tr&gt; </span><br><span class="line">    &lt;td&gt;&amp;nbsp;&lt;&#x2F;td&gt;</span><br><span class="line">    &lt;td&gt;&lt;input name&#x3D;&quot;cmdSubmit&quot; type&#x3D;&quot;submit&quot; id&#x3D;&quot;cmdSubmit&quot; value&#x3D;&quot; 送出 &quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">  &lt;&#x2F;tr&gt;</span><br><span class="line">&lt;&#x2F;table&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;&#x2F;form&gt;</span><br><span class="line">&lt;p align&#x3D;center&gt;&lt;?&#x3D;$msg?&gt;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>数据库恢复<br>阿里云RDS云数据库，实例列表，管理。<code>truncate tabale ...</code>恢复单表</p></blockquote><p><img src="/../assets/imgs/2255249-7d715ec12fbd0522.png" alt="image.png"></p><p>选择备份最近的一个进行恢复，恢复在同一个库中，恢复后的表名有默认后缀区分。<br><img src="/../assets/imgs/2255249-ce7f1b4a79c91bb2.png" alt="image.png"><br><img src="/../assets/imgs/2255249-a2e088f8e5688b87.png" alt="image.png"></p><hr>]]></content>
    
    
    <summary type="html">aliyun数据库使用笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="aliyun" scheme="https://dragonersli.github.io/tags/aliyun/"/>
    
    <category term="mysql" scheme="https://dragonersli.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>aliyun磁盘扩容踩坑笔记！</title>
    <link href="https://dragonersli.github.io/2019/12/12/aliyun%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/12/12/aliyun%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2019-12-12T05:30:00.000Z</published>
    <updated>2024-05-12T16:45:08.908Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/../assets/imgs/2255249-75a2934d7d60c37d.png" alt="image.png"></p><p>#####扩容步骤：<br>######登录阿里云控制台、找到目标实例选择磁盘、在线数据盘扩容、指定扩容后的大小。付款成功后大概两三分钟服务器就能识别到扩容后的磁盘大小了（不需要重启实例）</p><p>#####出现的问题：因为扩容前磁盘是挂载状态，在线扩容完成后使用fdisk -l查看目标磁盘的大小发生变化了，但是df -hT查看挂载的容量还是原大小</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">###解决办法：</span><br><span class="line">①取消挂载：umount  &#x2F;data** </span><br><span class="line">②检查磁盘完整性：e2fsck  &#x2F;dev&#x2F;vdb** </span><br><span class="line">③增大或减少未挂载磁盘大小：resize2fs &#x2F;dev&#x2F;vdb** </span><br><span class="line">④重新挂载磁盘到目标目录：mount &#x2F;dev&#x2F;vdb &#x2F;data** </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">您好，您在服务器上执行 df -h 和 df -i 看一下是否还有磁盘是否被占满了，磁盘空间满对导致数据启动不了。</span><br><span class="line"> 您可以清理一下非必要文件，或者扩容一下云盘。</span><br><span class="line"> 扩容云盘容量 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;44986.html</span><br><span class="line">您好，您是扩容的数据盘吗，查看到您的数据盘为80G，您登陆服务器内部执行fdisk -l 并截图反馈一下   </span><br><span class="line">售后工程师 :    您好，根据您的截图反馈数据盘已扩展至80G，</span><br><span class="line">需要您手动在系统内部扩展分区，</span><br><span class="line">具体请您参考：https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;25452.html</span><br><span class="line"></span><br><span class="line">操作前建议您做好快照备份  </span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-3b8347c6ccc8d05e.png" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> 如果忘记了远程密码可以在控制台重置 ，对线上服务没有影响，</span><br><span class="line">这个密码不是服务器登录密码，是6位数远程连接密码，重置步骤： </span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-c96539887499f360.png" alt="image.png"><br><img src="/../assets/imgs/2255249-9dc8dfdaba695e30.png" alt="image.png"></p><p> <img src="/../assets/imgs/2255249-e0bdc4af24f02314.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-43020dcfa764fef2.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-31985ebbf25d6ef0.png" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">售后工程师 :  这边登陆您服务器查看您系统盘为 100G ，</span><br><span class="line">但是您又创建了一个 &#x2F;dev&#x2F;vda2 ,这个分区您是否需要，</span><br><span class="line">如不需要的话，这边删除，删除后直接将系统盘容量给您扩容到 100G ，</span><br><span class="line">数据盘的话，查看是未分区挂载的状态，</span><br><span class="line">您反馈下该数据盘需要挂载的目目录，这边协助分区挂载 </span><br><span class="line"> ****** :   数据盘的话，查看是未分区挂载的状态，您反馈下该数据盘需要挂载的目目录。</span><br><span class="line">这个你看挂载到哪个目录比较好。这边的需求是把&#x2F;dev&#x2F;vda1 40G扩容。  </span><br><span class="line"></span><br><span class="line">售后工程师 :    您好，已经可以了，系统盘为您扩容到 100G ，</span><br><span class="line">数据盘的80G 为您格式化分区后挂载到了 &#x2F;mnt下，您那边核实下</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-840f00b87867b765.png" alt="image.png"></p><p>##创建云盘</p><p>######新加磁盘： 直接创建云盘，添加包年包月云盘，然后命令行下<code>df -h</code>查看并无新磁盘加入进来。然后联系售后技术授权挂载。此种方式扩容相当于电脑的C盘（原磁盘）快满了，然后新加了一块磁盘D盘（新加的磁盘），这样C盘还是要满且C盘项目直接使用D盘空间很麻烦（项目跨目录访问）。只能把C盘资源移到D盘，也就是原磁盘上的文件移到新加的磁盘。这样不是最佳方案。<br>####挂载磁盘<br>######1.所有磁盘快照备份，避免数据丢失。 确认快照创建之后（不必等到创建完成100%授权）<br>######2.提供服务器登陆授权挂盘，硬盘挂载好，并且设置开机自动启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1\. 同意提供ECS的远程连接密码,实例用户名和实例密码， 授权阿里云完成已经授权的操作</span><br><span class="line"> 2\. 授权阿里云可以对实例做重启操作 </span><br><span class="line">3\. 授权阿里云对实例配置进行修改(阿里云会将修改情况告知您) </span><br><span class="line">您通过工单页面点击确认授权，即表示您授予阿里云上述操作权限并接受上述全部约定。</span><br><span class="line">如果您同意向阿里云提供系统管理员密码或管理终端密码，</span><br><span class="line">在问题处理完毕后，请您务必及时修改密码。</span><br><span class="line">同时提醒您在阿里云排查期间尽量不要对实例进行其它操作。</span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-348c65ee5513c9e9.png" alt="image.png"><br>##扩容云盘<br>######在原来磁盘上扩容：这样就没有上述问题了。<br><img src="/../assets/imgs/2255249-03c3f8d8ba1dfd65.png" alt="image.png"></p><p>######新加的磁盘一直是空的，一直用的是旧的磁盘。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按理说应该在一块磁盘上进行扩容，而不应该购买磁盘。</span><br><span class="line">但是现在已经购买了2块磁盘，却用不上，还要付费，卸载也卸载不了。</span><br><span class="line">这个有什么解决办法？比如磁盘合并等其它方案解决？</span><br><span class="line">项目中的主要是图片等资源占用磁盘，如果迁移到新磁盘不在项目目录下，则面临无法访问问题。</span><br></pre></td></tr></table></figure><p>  <img src="/../assets/imgs/2255249-dfb161135180beb9.png" alt="image.png"><br><img src="/../assets/imgs/2255249-7f5bb681a5d83528.png" alt="image.png"></p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">您好，磁盘空间扩容，您需要对空间满的磁盘进行扩容操作，</span><br><span class="line">您新购的数据盘需要您将数据迁移存储到数据盘目录下才会存储到数据盘上，</span><br><span class="line">如果您的业务可以修改目录，您可以将文件转移到数据盘进行存储，</span><br><span class="line">如果您需要扩容系统盘，您可以根据以下文档进行操作：</span><br><span class="line"></span><br><span class="line">在线扩容磁盘的具体流程：</span><br><span class="line">第一步：在线扩容云盘（即不在重启服务器的情况下，扩大磁盘容量），</span><br><span class="line">请您参看文档 https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;113316.html 进行。</span><br><span class="line">请仔细阅读文档中【背景信息】一节。</span><br><span class="line">注意-1：此步只是扩大存储容量，而不是扩容文件系统，</span><br><span class="line">因此您还必须再扩容文件系统。</span><br><span class="line">注意-2：请【务必勾选在线扩容】。如果未勾选在线扩容，</span><br><span class="line">则需要在控制台重启服务器才能使操作生效。</span><br><span class="line"></span><br><span class="line">第二步：文件系统扩容是重要操作，存在一定的风险，为了安全起见，</span><br><span class="line">强烈建议您先对服务器做下磁盘快照，以防数据损坏或丢失。</span><br><span class="line">创建磁盘快照的方法，请您参看文档： https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;25455.html，</span><br><span class="line">快照创建完毕后，您再进行文件系统扩容。</span><br><span class="line"></span><br><span class="line">第三步：在阿里云网页控制台上扩容磁盘空间后，</span><br><span class="line">还得进入服务器中对文件系统进行扩容，后续步骤如下：</span><br><span class="line">①如果是扩展分区和文件系统_Linux系统盘，请您参看文档：https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;111738.html</span><br><span class="line">②如果是扩展分区和文件系统_Linux数据盘，请您参看文档：https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;25452.html</span><br><span class="line">③如果是扩展分区和文件系统_Windows，请您参看文档：https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;25451.html</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">您好，数据盘无法合并到系统盘进行使用的，会导致系统无法正常使用，辛苦您稍后，这边核实一下数据盘是否可以退款。</span><br><span class="line">卸载数据盘会将数据也卸载建议您操作前备份好数据。</span><br><span class="line">您好，辛苦您提供一下您的ECS服务器IP，或者是实例id，这边为您具体核实一下相关的磁盘信息，还请您理解。</span><br></pre></td></tr></table></figure><p><code>实列iD:    i-bp1fyvsfkm2yns5sabmv</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">您好，这边查看到您的服务器下绑定了两个数据盘，</span><br><span class="line">如果不再使用，您可以将您的数据盘转化为按量付费的数据盘后进行释放， 在释放前，辛苦您做好数据备份。</span><br><span class="line">包年包月的数据盘转化计费方式属于实时降配，实时降配由于降配规则的原因，</span><br><span class="line">可能会造成一定的资损，具体的可退金额会在页面上显示，建议您谨慎操作。</span><br><span class="line"></span><br><span class="line">转化计费方式辛苦您参考：</span><br><span class="line">https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;145018.html?spm&#x3D;5176.11065259.1996646101.searchclickresult.458543ffm47iGA</span><br><span class="line"></span><br><span class="line">实时降配需要相关权限，如您需要进行相关操作并且没有权限，您可以再反馈，这边为您进行相关申请，还请您理解。</span><br></pre></td></tr></table></figure><p> <code>您好，按照你说的方法，多余的两块磁盘已经卸载了.这个费用是怎么退的呢？</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">您好，这边查看到您已经操作了变更磁盘的计费，后续不再使用，建议您及时释放，以免造成不必要的计费；</span><br><span class="line"></span><br><span class="line">转化计费方式的同时，页面上会显示出具体的可退金额，</span><br><span class="line">这边查看到您的降配并没有退款的金额，具体的降配价格计算规则，</span><br><span class="line">辛苦您参考文档：https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;65679.html</span><br><span class="line"></span><br><span class="line">相关信息这边已经在您操作前进行了提醒，还请您理解。</span><br></pre></td></tr></table></figure><p><code>以前买的80G的时间这么久没有退费能理解，这个100G的昨天刚买的，使用还不足24小时，怎么会没有退费呢？这个文档我看不太懂。能解释一下么，谢谢！</code></p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">您好，辛苦您参考：</span><br><span class="line">降配时，剩余价值详情：</span><br><span class="line">正向订单 206155443850295</span><br><span class="line">订单金额 257.930,</span><br><span class="line">订单开始时间: 2020-06-02 22:03:51,</span><br><span class="line">订单结束时间：2021-01-10 00:00:00,</span><br><span class="line">剩余价值: 257.050</span><br><span class="line"></span><br><span class="line">正向订单 205170207040295</span><br><span class="line">订单金额 11176.020,</span><br><span class="line">优惠了 2113.980,</span><br><span class="line">订单开始时间: 2020-01-10 00:00:00,</span><br><span class="line">订单结束时间：2021-01-10 00:00:00,</span><br><span class="line">剩余价值: 6726.730,</span><br><span class="line">优惠的金额和代金券的金额在计算剩余价值的时候，并不会包含在内，请注意因此带来的可退金额的减少。</span><br><span class="line"></span><br><span class="line">费用小结:</span><br><span class="line">新配置费用:7927.210</span><br><span class="line"></span><br><span class="line">剩余价值:6983.780</span><br><span class="line"></span><br><span class="line">新配置的价值大于原配置的价值，无钱可退。</span><br><span class="line">出现这种情况一般是因为新的配置因为购买时间原因没有折扣，而原配置购买时享受了折扣，</span><br><span class="line">导致剩余价值比新配置价值低。还请您能够理解。</span><br></pre></td></tr></table></figure><p>##磁盘缩容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">磁盘缩容：https:&#x2F;&#x2F;help.aliyun.com&#x2F;document_detail&#x2F;66372.html</span><br><span class="line">磁盘的话是无法缩容的， 如果您这边想将服务器的其中一块磁盘进行退款的话，</span><br><span class="line"> 您可以反馈下对应需要退款的磁盘id 这边为您确认下退款相关问题。</span><br><span class="line">数据转移到另个一磁盘的话，这个需要您这边自行服务器内进行复制的，</span><br><span class="line">这边是无法代替操作的，退款的话对应磁盘就直接释放了。 这个是不会自动转移数据的。</span><br><span class="line"> linux 系统 复制的话 命令是cp  格式是  cp &#x2F;目录路径文件     &#x2F;拷贝的目录路径 </span><br></pre></td></tr></table></figure><p>#####因为新加的磁盘无数据又不支持卸载，可以从包年包月转成按量付费，然后可以卸载释放磁盘。阿里云后台正常显示磁盘容量，服务器<code>df -h</code>和宝塔上还是显示原来的，这时候要重启实例才能生效！</p><hr>]]></content>
    
    
    <summary type="html">aliyun磁盘扩容踩坑笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>windows配置静态IP地址笔记！</title>
    <link href="https://dragonersli.github.io/2019/11/22/windows%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81IP%E5%9C%B0%E5%9D%80%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/11/22/windows%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81IP%E5%9C%B0%E5%9D%80%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2019-11-22T06:32:00.000Z</published>
    <updated>2024-05-12T17:21:37.277Z</updated>
    
    <content type="html"><![CDATA[<p>#####需求：开发微信公众号，用手机测试，为了方便，使用自己电脑作为测试服务器。<br>######因为配置的虚拟主机是用局域网的IP地址，动态IP就不方便了，所以配置静态IP。<br>######但是在公司配好静态IP，开发测试上网都没问题。回到家里就有问题了，所以要设置多个静态IP方便开发测试。</p><p>####公司设置静态IP<br>#####<code>控制面板</code> <code>所有控制面板项</code> <code>网络连接</code> <code>WLAN点击右键属性``选择Internet协议版本4（TCP/IPv4）</code><br><code>点属性</code><br><code>设置静态IP地址</code>，<code>子网掩码默认</code>，<code>默认网关使用ipconfig命令获取</code><br><code>首选DNS服务器填写默认网关地址</code><br><code>（DNS服务器地址记得改成默认网关的地址，否则可能无法上网。）</code><br><code>然后再点高级添加静态IP地址，子网掩码默认，默认网关填写小米的默认网关地址【192.168.31.1】</code><br><code>电脑右下角网络图标找到连接的WIFI点击属性查看设置的静态IPv4地址和IPv4 DNS服务器</code><br><img src="/../assets/imgs/2255249-bd0fd708960f15cc.png" alt="image.png"><br>######【获取默认网关一】ipconfig获取IPv4地址，子网掩码，默认网关等<br><img src="/../assets/imgs/2255249-f6e31fdf47120726.png" alt="image.png"><br>######【获取默认网关二】电脑右下角网络图标找到连接的WIFI点击属性查看设置的静态IPv4地址和IPv4 DNS服务器<br><img src="/../assets/imgs/2255249-2f9c1dfe0cf00846.png" alt="image.png"><br><img src="/../assets/imgs/2255249-f241281b691c1c94.png" alt="image.png"></p><p>####家里电脑设置静态IP地址:<br>#####<code>控制面板``所有控制面板项``网络连接``WLAN点击右键属性``选择Internet协议版本4（TCP/IPv4）``点属性</code><br><code>备用DNS服务器填写小米路由器的默认网关地址【192.168.31.1】</code><br><code>然后再点高级添加静态IP地址，子网掩码默认，默认网关填写小米的默认网关地址【192.168.31.1】</code><br><code>电脑右下角网络图标找到连接的WIFI点击属性查看设置的静态IPv4地址和IPv4 DNS服务器</code><br><img src="/../assets/imgs/2255249-592aa89de70283ea.png" alt="image.png"><br><img src="/../assets/imgs/2255249-c01815d34f895c22.png" alt="image.png"><br><img src="/../assets/imgs/2255249-bdb8c18c86932358.png" alt="image.png"></p><hr>]]></content>
    
    
    <summary type="html">windows配置静态IP地址笔记！</summary>
    
    
    
    <category term="windows" scheme="https://dragonersli.github.io/categories/windows/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>Windows局域网共享文件笔记！</title>
    <link href="https://dragonersli.github.io/2019/11/22/Windows%E5%B1%80%E5%9F%9F%E7%BD%91%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/11/22/Windows%E5%B1%80%E5%9F%9F%E7%BD%91%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2019-11-22T06:28:00.000Z</published>
    <updated>2024-05-12T17:22:12.209Z</updated>
    
    <content type="html"><![CDATA[<p>######需求：同一局域网其他电脑访问自己电脑文件。</p><p>######本地目录右键属性选共享，点击共享。<br><img src="/../assets/imgs/2255249-8b75ee9411c6e389.png" alt="image.png"></p><p>######添加一个Everyone，设置读取&#x2F;写入权限，点击共享。<br>######同一局域网其他用户，文件夹地址栏输入：\DRAGONERSLI-P50\pjh 就可以访问自己电脑的文件了。</p><p><img src="/../assets/imgs/2255249-398191aea80c4ff5.png" alt="image.png"></p><p>###Windows10访问局域网共享文件需要输入网络凭据！<br>######控制面板\所有控制面板项\网络和共享中心\高级共享设置，密码保护的共享，选择：无密码保护的共享。否则就需要输入网络凭据了。</p><p>######局域网其它机器上点击网络，看到同一个局域网的机器名称，点击可以看到刚刚设置的共享文件夹，点击就可以直接打开了。<br><img src="/../assets/imgs/2255249-6897c850efa3d552.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-295ab50f7dc5799e.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-5316b0f1e97017d7.png" alt="image.png"></p><p> ####<code>控制面板\所有控制面板项\凭据管理器</code>，查看windows凭据<br><code>控制面板\所有控制面板项\凭据管理器 </code><br><img src="/../assets/imgs/2255249-673594fb977a4a29.png" alt="image.png"><br><img src="/../assets/imgs/2255249-dba294d66c63803a.png" alt="image.png"></p><hr>]]></content>
    
    
    <summary type="html">Windows局域网共享文件笔记！</summary>
    
    
    
    <category term="windows" scheme="https://dragonersli.github.io/categories/windows/"/>
    
    
    <category term="windows" scheme="https://dragonersli.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>aliyun域名转入及DNS修改笔记！</title>
    <link href="https://dragonersli.github.io/2019/11/22/aliyun%E5%9F%9F%E5%90%8D%E8%BD%AC%E5%85%A5%E5%8F%8ADNS%E4%BF%AE%E6%94%B9%E7%AC%94%E8%AE%B0%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/11/22/aliyun%E5%9F%9F%E5%90%8D%E8%BD%AC%E5%85%A5%E5%8F%8ADNS%E4%BF%AE%E6%94%B9%E7%AC%94%E8%AE%B0%EF%BC%81/</id>
    <published>2019-11-22T05:46:00.000Z</published>
    <updated>2024-05-12T18:01:04.116Z</updated>
    
    <content type="html"><![CDATA[<p>####域名从<code>ucloud.cn</code>转移到<code>aliyun.com</code></p><p>######域名转入阿里云：<a href="https://help.aliyun.com/document_detail/54077.html">https://help.aliyun.com/document_detail/54077.html</a><br>######域名信息查询：<a href="https://whois.aliyun.com/">https://whois.aliyun.com</a><br>####阿里云域名转入：<a href="https://wanwang.aliyun.com/domain/transfers">https://wanwang.aliyun.com/domain/transfers</a><br>#####输入域名，打个空格，再输入转移密码 <code>xxx.com d1f7)#u3</code><br><img src="/../assets/imgs/2255249-19e3901d0968267c.png" alt="image.png"><br><img src="/../assets/imgs/2255249-60965a7738706108.png" alt="image.png"><br>######信息模板实名认证，刚添加要3-5工作日审核！有时候会几分钟就审核通过<br><img src="/../assets/imgs/2255249-83005f3881143e14.png" alt="image.png"><br><img src="/../assets/imgs/2255249-de8011a8e9c93c43.png" alt="image.png"><br>######选择模板确认转入，付费转入为域名续费1年价格。<br><img src="/../assets/imgs/2255249-8888654e527cc2b7.png" alt="image.png"><br>######11月16日到11月22日，历时几天终于域名转过来了<br><img src="/../assets/imgs/2255249-98e1192078f2922d.png" alt="image.png"></p><p>######试着暂停自动生成的解析，发现没问题<br><img src="/../assets/imgs/2255249-a741a86623e3485d.png" alt="image.png"><br>######原来的域名管理系统状态显示转出中，解析已不可用了<br><img src="/../assets/imgs/2255249-00f97ace796d32de.png" alt="image.png"><br><img src="/../assets/imgs/2255249-44c7c7c85cbb21bc.png" alt="image.png"></p><h2 id="域名从别的地方迁移到阿里云后，新添加的子域名解析失败！"><a href="#域名从别的地方迁移到阿里云后，新添加的子域名解析失败！" class="headerlink" title="域名从别的地方迁移到阿里云后，新添加的子域名解析失败！"></a>域名从别的地方迁移到阿里云后，新添加的子域名解析失败！</h2><p><img src="/../assets/imgs/2255249-e50364d4dafd0ed8.png" alt="image.png"><br><img src="/../assets/imgs/2255249-0db6aad2b6d6cc00.png" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">未使用阿里云解析</span><br><span class="line">请到域名注册商处修改DNS 服务器为：</span><br><span class="line">更改 DNS 服务器 为</span><br><span class="line">dns19.hichina.com</span><br><span class="line">dns20.hichina.com</span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-a73c90980f9c789f.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-740e26da4e40845c.png" alt="image.png"></p><p><img src="/../assets/imgs/2255249-4c46b9e393308f4e.png" alt="image.png"><br>######等待了几个小时后终于域名可以解析正式访问了。</p><hr>]]></content>
    
    
    <summary type="html">aliyun域名转入及DNS修改笔记！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
    <category term="aliyun" scheme="https://dragonersli.github.io/tags/aliyun/"/>
    
    <category term="DNS" scheme="https://dragonersli.github.io/tags/DNS/"/>
    
  </entry>
  
  <entry>
    <title>aliyun服务器ECS重置密码！</title>
    <link href="https://dragonersli.github.io/2019/11/12/aliyun%E6%9C%8D%E5%8A%A1%E5%99%A8ECS%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/11/12/aliyun%E6%9C%8D%E5%8A%A1%E5%99%A8ECS%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81%EF%BC%81/</id>
    <published>2019-11-12T05:30:00.000Z</published>
    <updated>2024-05-12T16:45:19.227Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/../assets/imgs/2255249-dbcdea8e6d86ee67.png" alt="阿里云SSH异地登录"><br><code>更改服务器密码，提示要在阿里云控制台重启实例生效。担心重启实例后，要手动开启各项服务，要停服务几分钟。然而重启后并没不需要手动重启各项服务，旧的ftp和shell连接会失效，要使用新密码</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">重置实例密码后，只有在控制台重启实例才能生效。</span><br><span class="line">如果实例已绑定密钥对，重置密码后系统将可以通过新密码进行登录。</span><br><span class="line">如果Windows实例默认管理员账号administrator被修改，则重置密码将会失败。</span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-b41500863d04cbfa.png" alt="阿里云ECS重置密码"><br><img src="/../assets/imgs/2255249-ea65f1b12d5a1cea.png" alt="阿里云ECS重启服务"></p><hr>]]></content>
    
    
    <summary type="html">aliyun服务器ECS重置密码！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>aliyun服务器root账号ssh登录解禁！</title>
    <link href="https://dragonersli.github.io/2019/11/09/aliyun%E6%9C%8D%E5%8A%A1%E5%99%A8root%E8%B4%A6%E5%8F%B7ssh%E7%99%BB%E5%BD%95%E8%A7%A3%E7%A6%81%EF%BC%81/"/>
    <id>https://dragonersli.github.io/2019/11/09/aliyun%E6%9C%8D%E5%8A%A1%E5%99%A8root%E8%B4%A6%E5%8F%B7ssh%E7%99%BB%E5%BD%95%E8%A7%A3%E7%A6%81%EF%BC%81/</id>
    <published>2019-11-09T05:30:00.000Z</published>
    <updated>2024-05-12T16:45:27.853Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/assets/imgs/2255249-5ca564c166cb3bd5.png" alt="阿里云服务器购买，选了Alibaba Cloud Linux操作系统，2.1903 LTS 64位 等保2.0三级版"><br>######进入服务器设置了3个不同级别的用户和密码，<code>/root/cybersecurity.sh</code>执行后root无法登陆了,最后在阿里云后台通过<code>vnc</code>方式登陆后，取消禁止<code>root</code>登陆解决！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Connecting to 120.27.230.78:22...</span><br><span class="line">Connection established.</span><br><span class="line">To escape to local shell, press &#39;Ctrl+Alt+]&#39;.</span><br><span class="line"></span><br><span class="line">WARNING! The remote SSH server rejected X11 forwarding request.</span><br><span class="line">Last login: Fri Nov  6 17:01:25 2020 from 183.134.155.166</span><br><span class="line">欢迎使用 Alibaba Cloud Linux 2 等保合规镜像</span><br><span class="line">1.概述</span><br><span class="line">   Alibaba Cloud Linux 2 等保合规镜像是基于 Alibaba Cloud Linux 2 官方镜像，根据《GB&#x2F;T22239-2019信息安全技术网络安全等级保护基本要求》进行等保加固的镜像，用户使用本镜像无需额外配置即可满足大部分等保合规要求：</span><br><span class="line">    （1）身份鉴别</span><br><span class="line">    （2）访问控制</span><br><span class="line">    （3）安全审计</span><br><span class="line">    （4）入侵防范</span><br><span class="line">    （5）恶意代码防范</span><br><span class="line">2.使用指南</span><br><span class="line">    按照《GB&#x2F;T22239-2019信息安全技术网络安全等级保护基本要求》，部分配置需要用户手动执行命令进行配置。用户可以通过 root 账户登录系统后，执行&#x2F;root&#x2F;cybersecurity.sh 脚本来实现这类加固。</span><br><span class="line">[root@iZbp19n36uysr947rrddpaZ ~]# </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/../assets/imgs/2255249-92ced3f8db982a87.png" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ssh设置的问题   </span><br><span class="line">vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config</span><br><span class="line"></span><br><span class="line">#找到以下几个参数去掉前面#号</span><br><span class="line">PermitRootLogin yes  </span><br><span class="line">ClientAliveCountMax 3</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">#重新载入ssh参数</span><br><span class="line">service sshd reload     &#x2F;&#x2F;重启</span><br><span class="line">#或者分步执行</span><br><span class="line">service sshd stop          &#x2F;&#x2F;停止</span><br><span class="line">service sshd start           &#x2F;&#x2F;开启</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
    <summary type="html">aliyun服务器root账号ssh登录解禁！</summary>
    
    
    
    <category term="linux" scheme="https://dragonersli.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://dragonersli.github.io/tags/linux/"/>
    
  </entry>
  
</feed>
